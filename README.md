 # dbtest
 
`dbtest` is an utility for end to end testing DBT pipelines. `dbtest` lets you pick a model to test, it expects some mocked dependencies and a final result data. It asserts the data generated by a model  against the provided expected output.

`dbtest` does not mess with your dbt project, it simply generates SQL queries based on your project `manifests.json`. These SQL queries can be used as regular dbt tests.

## Workflow
  
1. Select a model you want to test
2. Picked any arbitrarly dependencies to Mock. Any intermediate models or sources are Ok. The mocked data is provided via CSV files.
3. Provide expected output result using a CSV file
4. Use `dbtest` cli to generate test queries
5. Generated queries are run via `dbt test` command


## Installation
- ToDo
 
##Â Example project
- ToDo

## Details

- This project uses `manifest.json` to figure out what are the dependencies of the model that you are testing.
- Given a model to test `dbtest` recursively rebuilds the sql queries accross dependencies
- While rebuilding a model SQL `dbtest` replaces table for given mocked data
- `dbtest` creates a giant SQL query with mocks and model SQL logic. The output of the query is then compared to the provided expected data via a `MINUS` sql operation.
 
